<Page
    x:Class="AllOrNothing.Views.PlayerAddingPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:AllOrNothing.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:toolkit="using:CommunityToolkit.WinUI.UI.Controls"
    xmlns:conv="using:AllOrNothing.Converters"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
    Loaded="Page_Loaded">

    <Page.Resources>
        <conv:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Page.Resources>
    
    <Grid Background="{ThemeResource GradientBrush6 }">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <StackPanel Orientation="Vertical"
                    Grid.Column="0"
                    Margin="10,10,10,10">

            <Button Content="Új játékos"
                    FontSize="{ThemeResource MediumFontSize}"
                    Margin="10,10,10,10"
                    HorizontalAlignment="Stretch"
                    Command="{x:Bind ViewModel.NewPlayerCommand}"/>

            <ScrollViewer MaxHeight="500">
                <toolkit:DataGrid ItemsSource="{x:Bind ViewModel.AllPlayers, Mode=OneWay}"
                              AutoGenerateColumns="False"
                              SelectedItem="{x:Bind ViewModel.SelectedPlayer, Mode=TwoWay}"
                              CanUserReorderColumns="False"
                              IsReadOnly="True">
                    <toolkit:DataGrid.Columns>
                        <toolkit:DataGridTextColumn Header="Azonosító" Binding="{Binding Id}" Tag="Id"
                                                 FontSize="20"/>
                        <toolkit:DataGridTextColumn Header="Név" Binding="{Binding Name}" Tag="Name"
                                                 FontSize="20"/>
                        <toolkit:DataGridTextColumn Header="Becenév" Binding="{Binding NickName}" Tag="NickNam"
                                                 FontSize="20"/>
                        <toolkit:DataGridTextColumn Header="Intézmény" Binding="{Binding Institute}" Tag="Institute"
                                                 />

                    </toolkit:DataGrid.Columns>
                </toolkit:DataGrid>
            </ScrollViewer>
        </StackPanel>

        <!-- Form area-->
        <Grid Grid.Column="1" Background="{ThemeResource GreyBrush}" CornerRadius="30"
              Visibility="{x:Bind ViewModel.FormEnabled, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <StackPanel Orientation="Horizontal"
                        Grid.Row="0">
                <TextBlock Text="{x:Bind ViewModel.EditingPlayer.Id, Mode=OneWay}" 
                           Margin="10,10,10,10" FontSize="{ThemeResource LargeFontSize}"/>

                <TextBlock Text="{x:Bind ViewModel.EditingPlayer.Name, Mode=OneWay}"
                           Margin="10,10,10,10" FontSize="{ThemeResource LargeFontSize}"/>
            </StackPanel>

            <StackPanel Orientation="Vertical"
                        Grid.Row="1"
                        Spacing="30">
                <StackPanel Orientation="Horizontal" Spacing="20">
                    <TextBlock Text="Név:" FontSize="{ThemeResource MediumFontSize}"/>
                    <TextBox Text="{x:Bind ViewModel.EditingPlayer.Name, Mode=OneWay}" FontSize="{ThemeResource MediumFontSize}"
                             x:Name="nameTextBox"
                             TextChanged="{x:Bind ViewModel.TextBoxChanged}"
                             IsEnabled="{x:Bind ViewModel.FormEnabled, Mode=OneWay}"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal" Spacing="20">
                    <TextBlock Text="Becenév:" FontSize="{ThemeResource MediumFontSize}"/>
                    <TextBox Text="{x:Bind ViewModel.EditingPlayer.NickName, Mode=OneWay}" FontSize="{ThemeResource MediumFontSize}"
                             x:Name="nickNameTextBox"
                             TextChanged="{x:Bind ViewModel.TextBoxChanged}"
                             IsEnabled="{x:Bind ViewModel.FormEnabled, Mode=OneWay}"/>
                </StackPanel>
                
                <StackPanel Orientation="Horizontal" Spacing="20">
                    <TextBlock Text="Intézmény:" FontSize="{ThemeResource MediumFontSize}"/>
                    <TextBox Text="{x:Bind ViewModel.EditingPlayer.Institute, Mode=OneWay}" FontSize="{ThemeResource MediumFontSize}"
                             x:Name="instituteTextBox"
                             TextChanged="{x:Bind ViewModel.TextBoxChanged}"
                             IsEnabled="{x:Bind ViewModel.FormEnabled, Mode=OneWay}"/>
                </StackPanel>
                
                <Button Visibility="{x:Bind ViewModel.IsPlayerUnderEdit, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}" Content="Mentés"
                        Command="{x:Bind ViewModel.SaveCommand}"/>
                
                <Button Content="Játékos törlése"
                        Command="{x:Bind ViewModel.DeleteCommand}"/>

            </StackPanel>
            
        </Grid>
        
       
    </Grid>
</Page>
